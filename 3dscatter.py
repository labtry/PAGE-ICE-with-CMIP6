# -*-coding: utf-8- -*-

from scipy.optimize import curve_fit
import numpy as np
from numpy import array, exp
import matplotlib
import matplotlib.pyplot as plt
import mpl_toolkits.mplot3d

# test function
def function(data, a, b, c):
	x = data[0]
	y = data[1]
	return a*x**b*y**c
	#return exp(a+b*x+c*y)

	
x = np.array([121.84,126.36,111.55,86.88,103.14,79.72,68.54,89.95,121.84,126.36,111.55,86.88,103.14,79.72,68.54,89.95,116.18,116.92,101.07,76.32,91.05,60.06,46.33,74.07,76.01,98.04,56.24,45.60,50.49,21.71,14.39,33.97,120.40,134.27,103.67,73.72,83.59,38.02,20.07,58.62,120.40,134.27,103.67,73.72,83.59,38.02,20.07,58.62,183.88,192.01,179.61,140.62,166.64,131.47,110.99,146.61,183.88,192.01,179.61,140.62,166.64,131.47,110.99,146.61,183.88,192.01,179.61,140.62,166.64,131.47,110.99,146.61,183.88,192.01,179.61,140.62,166.64,131.47,110.99,146.61])
y = np.array([11.28,14.67,13.28,8.78,16.12,25.83,22.77,21.97,11.55,15.24,14.04,9.39,16.72,26.35,23.38,22.49,12.69,16.63,15.41,11.00,17.95,27.37,24.60,23.64,14.40,18.35,17.13,13.04,19.58,28.67,26.19,25.12,12.14,15.96,14.62,10.16,17.53,27.09,24.16,23.31,13.01,17.19,16.05,11.51,18.64,27.92,25.50,24.37,11.79,15.63,14.46,9.39,16.96,26.73,23.88,23.01,15.63,19.58,18.74,14.87,21.10,29.91,27.41,26.33,13.10,16.93,15.80,11.58,18.11,27.63,24.64,24.03,13.31,17.11,15.65,12.36,18.14,27.45,24.74,24.02])
z = np.array([0.33034895,0.237380681,0.326778979,0.039794177,0.606818714,1.084978475,0.733806641,0.65,0.56,0.40,0.62,0.24,1.01,1.92,1.66,1.21,1.20,0.77,1.41,0.78,2.03,4.81,5.46,2.99,3.49,2.33,5.62,4.84,7.65,28.63,44.64,13.78,0.85,0.52,0.91,0.54,1.87,7.23,12.12,3.28,1.57,0.85,1.86,1.20,3.12,10.89,22.93,5.51,0.48,0.31,0.48,0.21,0.69,1.42,1.35,1.00,2.41,1.58,2.68,2.91,3.22,5.12,5.69,3.87,1.06,0.69,1.06,0.83,1.35,2.58,2.38,1.86,1.13,0.77,1.04,1.16,1.37,2.382094242,2.423509822,1.856474366])

parameters, covariance = curve_fit(function, [x, y], z, maxfev=1000)

print(parameters)
print(covariance)
# create surface function model
# setup data points for calculating surface model
model_x_data = np.linspace(min(x), max(x), 30)
model_y_data = np.linspace(min(y), max(y), 30)
# create coordinate arrays for vectorized evaluations
X, Y = np.meshgrid(model_x_data, model_y_data)
# calculate Z coordinate array
Z = function(np.array([X, Y]), *parameters)

ax = plt.subplot(projection = '3d')  # 创建一个三维的绘图工程
ax.set_title('3d_image_show')  # 设置本图名称
ax.w_xaxis.pane.fill = False
ax.w_yaxis.pane.fill = False
ax.w_zaxis.pane.fill = False
#fig = plt.figure()
#fig.set_facecolor('white')
ax.set_facecolor('white') 

ax.tick_params(axis = 'both', which = 'major', labelsize = 15)

ax.plot_surface(X, Y, Z,rstride=3,cstride=3, edgecolors='#88C0D7',alpha=0,linewidth=1)

ax.scatter(x[0], y[0], z[0], c = '#A0BF7C', marker ='o', s = 25)
ax.scatter(x[1], y[1], z[1], c = '#A0BF7C', marker ='^', s = 25)
ax.scatter(x[2], y[2], z[2], c = '#A0BF7C', marker ='v', s = 25)
ax.scatter(x[3], y[3], z[3], c = '#A0BF7C', marker ='s', s = 25)
ax.scatter(x[4], y[4], z[4], c = '#A0BF7C', marker ='d', s = 25)
ax.scatter(x[5], y[5], z[5], c = '#A0BF7C', marker ='D', s = 25)
ax.scatter(x[6], y[6], z[6], c = '#A0BF7C', marker ='<', s = 25)
ax.scatter(x[7], y[7], z[7], c = '#A0BF7C', marker ='>', s = 25)
ax.scatter(x[8+0], y[8+0], z[8+0], c = '#8ABEB2', marker ='o', s = 25)
ax.scatter(x[8+1], y[8+1], z[8+1], c = '#8ABEB2', marker ='^', s = 25)
ax.scatter(x[8+2], y[8+2], z[8+2], c = '#8ABEB2', marker ='v', s = 25)
ax.scatter(x[8+3], y[8+3], z[8+3], c = '#8ABEB2', marker ='s', s = 25)
ax.scatter(x[8+4], y[8+4], z[8+4], c = '#8ABEB2', marker ='d', s = 25)
ax.scatter(x[8+5], y[8+5], z[8+5], c = '#8ABEB2', marker ='D', s = 25)
ax.scatter(x[8+6], y[8+6], z[8+6], c = '#8ABEB2', marker ='<', s = 25)
ax.scatter(x[8+7], y[8+7], z[8+7], c = '#8ABEB2', marker ='>', s = 25)
ax.scatter(x[16+0], y[16+0], z[16+0], c = '#458994', marker ='o', s = 25)
ax.scatter(x[16+1], y[16+1], z[16+1], c = '#458994', marker ='^', s = 25)
ax.scatter(x[16+2], y[16+2], z[16+2], c = '#458994', marker ='v', s = 25)
ax.scatter(x[16+3], y[16+3], z[16+3], c = '#458994', marker ='s', s = 25)
ax.scatter(x[16+4], y[16+4], z[16+4], c = '#458994', marker ='d', s = 25)
ax.scatter(x[16+5], y[16+5], z[16+5], c = '#458994', marker ='D', s = 25)
ax.scatter(x[16+6], y[16+6], z[16+6], c = '#458994', marker ='<', s = 25)
ax.scatter(x[16+7], y[16+7], z[16+7], c = '#458994', marker ='>', s = 25)
ax.scatter(x[24+0], y[24+0], z[24+0], c = '#9F775D', marker ='o', s = 25)
ax.scatter(x[24+1], y[24+1], z[24+1], c = '#9F775D', marker ='^', s = 25)
ax.scatter(x[24+2], y[24+2], z[24+2], c = '#9F775D', marker ='v', s = 25)
ax.scatter(x[24+3], y[24+3], z[24+3], c = '#9F775D', marker ='s', s = 25)
ax.scatter(x[24+4], y[24+4], z[24+4], c = '#9F775D', marker ='d', s = 25)
ax.scatter(x[24+5], y[24+5], z[24+5], c = '#9F775D', marker ='D', s = 25)
ax.scatter(x[24+6], y[24+6], z[24+6], c = '#9F775D', marker ='<', s = 25)
ax.scatter(x[24+7], y[24+7], z[24+7], c = '#9F775D', marker ='>', s = 25)
ax.scatter(x[32+0], y[32+0], z[32+0], c = '#FC9D99', marker ='o', s = 25)
ax.scatter(x[32+1], y[32+1], z[32+1], c = '#FC9D99', marker ='^', s = 25)
ax.scatter(x[32+2], y[32+2], z[32+2], c = '#FC9D99', marker ='v', s = 25)
ax.scatter(x[32+3], y[32+3], z[32+3], c = '#FC9D99', marker ='s', s = 25)
ax.scatter(x[32+4], y[32+4], z[32+4], c = '#FC9D99', marker ='d', s = 25)
ax.scatter(x[32+5], y[32+5], z[32+5], c = '#FC9D99', marker ='D', s = 25)
ax.scatter(x[32+6], y[32+6], z[32+6], c = '#FC9D99', marker ='<', s = 25)
ax.scatter(x[32+7], y[32+7], z[32+7], c = '#FC9D99', marker ='>', s = 25)
ax.scatter(x[40+0], y[40+0], z[40+0], c = '#FF4364', marker ='o', s = 25)
ax.scatter(x[40+1], y[40+1], z[40+1], c = '#FF4364', marker ='^', s = 25)
ax.scatter(x[40+2], y[40+2], z[40+2], c = '#FF4364', marker ='v', s = 25)
ax.scatter(x[40+3], y[40+3], z[40+3], c = '#FF4364', marker ='s', s = 25)
ax.scatter(x[40+4], y[40+4], z[40+4], c = '#FF4364', marker ='d', s = 25)
ax.scatter(x[40+5], y[40+5], z[40+5], c = '#FF4364', marker ='D', s = 25)
ax.scatter(x[40+6], y[40+6], z[40+6], c = '#FF4364', marker ='<', s = 25)
ax.scatter(x[40+7], y[40+7], z[40+7], c = '#FF4364', marker ='>', s = 25)
ax.scatter(x[48+0], y[48+0], z[48+0], c = '#E4A15D', marker ='o', s = 25)
ax.scatter(x[48+1], y[48+1], z[48+1], c = '#E4A15D', marker ='^', s = 25)
ax.scatter(x[48+2], y[48+2], z[48+2], c = '#E4A15D', marker ='v', s = 25)
ax.scatter(x[48+3], y[48+3], z[48+3], c = '#E4A15D', marker ='s', s = 25)
ax.scatter(x[48+4], y[48+4], z[48+4], c = '#E4A15D', marker ='d', s = 25)
ax.scatter(x[48+5], y[48+5], z[48+5], c = '#E4A15D', marker ='D', s = 25)
ax.scatter(x[48+6], y[48+6], z[48+6], c = '#E4A15D', marker ='<', s = 25)
ax.scatter(x[48+7], y[48+7], z[48+7], c = '#E4A15D', marker ='>', s = 25)
ax.scatter(x[56+0], y[56+0], z[56+0], c = '#D96731', marker ='o', s = 25)
ax.scatter(x[56+1], y[56+1], z[56+1], c = '#D96731', marker ='^', s = 25)
ax.scatter(x[56+2], y[56+2], z[56+2], c = '#D96731', marker ='v', s = 25)
ax.scatter(x[56+3], y[56+3], z[56+3], c = '#D96731', marker ='s', s = 25)
ax.scatter(x[56+4], y[56+4], z[56+4], c = '#D96731', marker ='d', s = 25)
ax.scatter(x[56+5], y[56+5], z[56+5], c = '#D96731', marker ='D', s = 25)
ax.scatter(x[56+6], y[56+6], z[56+6], c = '#D96731', marker ='<', s = 25)
ax.scatter(x[56+7], y[56+7], z[56+7], c = '#D96731', marker ='>', s = 25)
ax.scatter(x[64+0], y[64+0], z[64+0], c = '#34CB34', marker ='o', s = 25)
ax.scatter(x[64+1], y[64+1], z[64+1], c = '#34CB34', marker ='^', s = 25)
ax.scatter(x[64+2], y[64+2], z[64+2], c = '#34CB34', marker ='v', s = 25)
ax.scatter(x[64+3], y[64+3], z[64+3], c = '#34CB34', marker ='s', s = 25)
ax.scatter(x[64+4], y[64+4], z[64+4], c = '#34CB34', marker ='d', s = 25)
ax.scatter(x[64+5], y[64+5], z[64+5], c = '#34CB34', marker ='D', s = 25)
ax.scatter(x[64+6], y[64+6], z[64+6], c = '#34CB34', marker ='<', s = 25)
ax.scatter(x[64+7], y[64+7], z[64+7], c = '#34CB34', marker ='>', s = 25)
ax.scatter(x[72+0], y[72+0], z[72+0], c = '#3399FE', marker ='o', s = 25)
ax.scatter(x[72+1], y[72+1], z[72+1], c = '#3399FE', marker ='^', s = 25)
ax.scatter(x[72+2], y[72+2], z[72+2], c = '#3399FE', marker ='v', s = 25)
ax.scatter(x[72+3], y[72+3], z[72+3], c = '#3399FE', marker ='s', s = 25)
ax.scatter(x[72+4], y[72+4], z[72+4], c = '#3399FE', marker ='d', s = 25)
ax.scatter(x[72+5], y[72+5], z[72+5], c = '#3399FE', marker ='D', s = 25)
ax.scatter(x[72+6], y[72+6], z[72+6], c = '#3399FE', marker ='<', s = 25)
ax.scatter(x[72+7], y[72+7], z[72+7], c = '#3399FE', marker ='>', s = 25)


label1 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='o')
label2 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='^')
label3 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='v')
label4 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='s')
label5 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='d')
label6 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='D')
label7 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='<')
label8 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#A0BF7C', marker ='>')
label9 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='o')
label10 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='^')
label11 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='v')
label12 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='s')
label13 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='d')
label14 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='D')
label15 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='<')
label16 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#8ABEB2', marker ='>')
label17 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='o')
label18 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='^')
label19 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='v')
label20 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='s')
label21 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='d')
label22 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='D')
label23 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='<')
label24 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#458994', marker ='>')
label25 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='o')
label26 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='^')
label27 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='v')
label28 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='s')
label29 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='d')
label30 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='D')
label31 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='<')
label32 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#9F775D', marker ='>')
label33 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='o')
label34 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='^')
label35 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='v')
label36 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='s')
label37 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='d')
label38 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='D')
label39 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='<')
label40 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FC9D99', marker ='>')
label41 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='o')
label42 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='^')
label43 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='v')
label44 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='s')
label45 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='d')
label46 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='D')
label47 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='<')
label48 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#FF4364', marker ='>')
label49 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='o')
label50 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='^')
label51 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='v')
label52 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='s')
label53 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='d')
label54 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='D')
label55 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='<')
label56 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#E4A15D', marker ='>')
label57 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='o')
label58 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='^')
label59 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='v')
label60 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='s')
label61 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='d')
label62 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='D')
label63 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='<')
label64 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#D96731', marker ='>')
label65 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='o')
label66 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='^')
label67 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='v')
label68 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='s')
label69 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='d')
label70 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='D')
label71 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='<')
label72 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#34CB34', marker ='>')
label73 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='o')
label74 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='^')
label75 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='v')
label76 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='s')
label77 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='d')
label78 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='D')
label79 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='<')
label80 = matplotlib.lines.Line2D([0],[0], linestyle="none", c = '#3399FE', marker ='>')
#ax.legend([label1,label2,label3,label4,label5,label6,label7,label8,label9,label10,label11,label12,label13,label14,label15,label16,label17,label18,label19,label20,label21,label22,label23,label24,label25,label26,label27,label28,label29,label30,label31,label32,label33,label34,label35,label36,label37,label38,label39,label40,label41,label42,label43,label44,label45,label46,label47,label48,label49,label50,label51,label52,label53,label54,label55,label56,label57,label58,label59,label60,label61,label62,label63,label64,label65,label66,label67,label68,label69,label70,label71,label72,label73,label74,label75,label76,label77,label78,label79,label80], ['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''], numpoints = 1)
#ax.legend([label1,label9,label17,label25,label33,label41,label49,label57,label65,label73], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label2,label10,label18,label26,label34,label42,label50,label58,label66,label74], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label3,label11,label19,label27,label35,label43,label51,label59,label67,label75], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label4,label12,label20,label28,label36,label44,label52,label60,label68,label76], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label5,label13,label21,label29,label37,label45,label53,label61,label69,label77], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label6,label14,label22,label30,label38,label46,label54,label62,label70,label78], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label7,label15,label23,label31,label39,label47,label55,label63,label71,label79], ['','','','','','','','','',''], numpoints = 1)
#ax.legend([label8,label16,label24,label32,label40,label48,label56,label64,label72,label80], ['','','','','','','','','',''], numpoints = 1)

ax.set_xticks([0,50,100,150,200])
ax.set_yticks([10,15,20,25,30])
ax.set_ylim([5,30])
#ax.set_ylim([0,8])
ax.set_zticks([0,10,20,30,40,50])

ax.set_xlim([0,200])
ax.set_zlim([0,55])

#ax.set_xlabel('GDP per capita (thousand USD / yr)', fontsize=13)
#ax.set_ylabel('Annual mean temperature (oC)', fontsize=13)
#ax.set_zlabel('Vulnerability (% of GDP per oC)', fontsize=13)

plt.show()